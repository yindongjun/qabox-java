CREATE TABLE `at_project_info`  (`project_id` int(11) NOT NULL AUTO_INCREMENT,`project_name` varchar(120) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,`details` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL,`status` char(1) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL,`user_id` int(11) NULL DEFAULT NULL,`create_time` datetime(0) NULL DEFAULT NULL,`mark` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL,PRIMARY KEY (`project_id`) USING BTREE,UNIQUE INDEX `project_name`(`project_name`) USING BTREE,INDEX `at_project_fk_user_id`(`user_id`) USING BTREE,CONSTRAINT `at_project_fk_user_id` FOREIGN KEY (`user_id`) REFERENCES `at_user` (`user_id`) ON DELETE RESTRICT ON UPDATE RESTRICT) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Compact;
CREATE TABLE `at_project_user`  (`project_id` int(11) NOT NULL,`user_id` int(11) NOT NULL,PRIMARY KEY (`project_id`, `user_id`) USING BTREE,INDEX `at_project_user_fk_user_id`(`user_id`) USING BTREE,CONSTRAINT `at_project_user_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `at_project_info` (`project_id`) ON DELETE CASCADE ON UPDATE RESTRICT,CONSTRAINT `at_project_user_fk_user_id` FOREIGN KEY (`user_id`) REFERENCES `at_user` (`user_id`) ON DELETE CASCADE ON UPDATE RESTRICT) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Compact;
ALTER TABLE `at_complex_scene` ADD COLUMN `project_id` int(11) NULL DEFAULT NULL COMMENT '关联项目' AFTER `mark`;
ALTER TABLE `at_complex_scene` ADD CONSTRAINT `at_complex_scene_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `at_project_info` (`project_id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `at_complex_scene` ADD INDEX `at_complex_scene_fk_project_id`(`project_id`) USING BTREE;
ALTER TABLE `at_interface_info` ADD COLUMN `project_id` int(11) NULL DEFAULT NULL COMMENT '关联项目' AFTER `mark`;
ALTER TABLE `at_interface_info` ADD CONSTRAINT `at_interface_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `at_project_info` (`project_id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `at_interface_info` ADD INDEX `at_interface_fk_project_id`(`project_id`) USING BTREE;
ALTER TABLE `at_interface_mock` ADD COLUMN `project_id` int(11) NULL DEFAULT NULL COMMENT '项目ID' AFTER `mark`;
ALTER TABLE `at_interface_mock` ADD CONSTRAINT `at_interface_mock_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `at_project_info` (`project_id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `at_interface_mock` ADD INDEX `at_interface_mock_fk_project_id`(`project_id`) USING BTREE;
ALTER TABLE `at_interface_probe` ADD COLUMN `project_id` int(11) NULL DEFAULT NULL COMMENT '项目ID' AFTER `probe_config_json`;
ALTER TABLE `at_interface_probe` ADD CONSTRAINT `at_interface_probe_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `at_project_info` (`project_id`) ON DELETE CASCADE ON UPDATE RESTRICT;
ALTER TABLE `at_interface_probe` ADD INDEX `at_interface_probe_fk_project_id`(`project_id`) USING BTREE;
ALTER TABLE `at_message` ADD COLUMN `project_id` int(11) NULL DEFAULT NULL COMMENT '关联项目ID' AFTER `process_parameter`;
ALTER TABLE `at_message` ADD CONSTRAINT `at_message_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `at_project_info` (`project_id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `at_message` ADD INDEX `at_message_fk_project_id`(`project_id`) USING BTREE;
ALTER TABLE `at_message_scene` ADD COLUMN `project_id` int(11) NULL DEFAULT NULL COMMENT '项目ID' AFTER `create_time`;
ALTER TABLE `at_message_scene` ADD CONSTRAINT `at_message_scene_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `at_project_info` (`project_id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `at_message_scene` ADD INDEX `at_message_scene_fk_project_id`(`project_id`) USING BTREE;
ALTER TABLE `at_performance_test_config` ADD COLUMN `project_id` int(11) NULL DEFAULT NULL COMMENT '项目ID' AFTER `mark`;
ALTER TABLE `at_performance_test_config` ADD CONSTRAINT `ptc_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `at_project_info` (`project_id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `at_performance_test_config` ADD INDEX `project_id`(`project_id`) USING BTREE;
ALTER TABLE `at_set_scene` DROP FOREIGN KEY `at_set_scene_fk_set_id`;
ALTER TABLE `at_set_scene` ADD CONSTRAINT `at_set_scene_fk_set_id` FOREIGN KEY (`set_id`) REFERENCES `at_test_set` (`set_id`) ON DELETE CASCADE ON UPDATE RESTRICT;
ALTER TABLE `at_task` ADD COLUMN `project_id` int(11) NULL DEFAULT NULL COMMENT '关联项目ID' AFTER `mail_notify`;
ALTER TABLE `at_task` ADD CONSTRAINT `at_task_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `at_project_info` (`project_id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `at_task` ADD INDEX `at_task_fk_project_id`(`project_id`) USING BTREE;
ALTER TABLE `at_test_report` ADD COLUMN `project_id` int(11) NULL DEFAULT NULL COMMENT '项目ID' AFTER `guid`;
ALTER TABLE `at_test_report` ADD CONSTRAINT `at_test_report_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `at_project_info` (`project_id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `at_test_report` ADD INDEX `at_test_report_fk_project_id`(`project_id`) USING BTREE;
ALTER TABLE `at_test_result` KEY_BLOCK_SIZE = 0;
ALTER TABLE `at_test_set` ADD COLUMN `project_id` int(11) NULL DEFAULT NULL COMMENT '项目ID' AFTER `mark`;
ALTER TABLE `at_test_set` ADD CONSTRAINT `at_test_set_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `at_project_info` (`project_id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `at_test_set` ADD INDEX `at_test_set_fk_project_id`(`project_id`) USING BTREE;
INSERT INTO `at_busi_menu_info`(`menu_id`, `menu_name`, `menu_url`, `icon_name`, `parent_id`, `node_level`, `seq`, `status`, `create_time`, `create_user`, `mark`) VALUES (55, '项目管理', 'resource/system/projectInfo.html', '', 49, 2, 1, '1', '2020-07-28 14:19:47', 1, '');
INSERT INTO `at_operation_interface`(`op_id`, `op_name`, `call_name`, `is_parent`, `op_type`, `mark`, `status`, `parent_op_id`, `permission_mark`, `page_name`) VALUES (21139 , '项目管理', 'project', 'true', NULL, '', '0', 13, '', '');
INSERT INTO `at_operation_interface`(`op_id`, `op_name`, `call_name`, `is_parent`, `op_type`, `mark`, `status`, `parent_op_id`, `permission_mark`, `page_name`) VALUES (NULL, '删除项目', 'project-del', 'false', NULL, '', '0', 21139, '.object-del', 'projectInfo');
INSERT INTO `at_operation_interface`(`op_id`, `op_name`, `call_name`, `is_parent`, `op_type`, `mark`, `status`, `parent_op_id`, `permission_mark`, `page_name`) VALUES (NULL, '新增编辑项目信息', 'project-edit', 'false', NULL, '', '0', 21139, '.object-edit', 'projectInfo');
INSERT INTO `at_operation_interface`(`op_id`, `op_name`, `call_name`, `is_parent`, `op_type`, `mark`, `status`, `parent_op_id`, `permission_mark`, `page_name`) VALUES (NULL, '项目列表', 'project-list', 'false', NULL, '', '0', 21139, '', '');
INSERT INTO `at_operation_interface`(`op_id`, `op_name`, `call_name`, `is_parent`, `op_type`, `mark`, `status`, `parent_op_id`, `permission_mark`, `page_name`) VALUES (NULL, '管理项目成员', 'project-addOrDelUser', 'false', NULL, '', '0', 21139, '', '');
INSERT INTO `at_role_menu`(`role_Id`, `menu_id`) VALUES (1, 55);
INSERT INTO `at_project_info`(`project_id`, `project_name`, `details`, `status`, `user_id`, `create_time`, `mark`) VALUES (1, '默认项目', '所有未分类到指定项目的内容，所有人都有访问权限', '6', 1, '2020-07-31 16:36:44', '');
update at_complex_scene set project_id = 1;
update at_interface_info  set project_id = 1;
update at_message  set project_id = 1;
update at_interface_mock  set project_id = 1;
update at_interface_probe  set project_id = 1;
update at_message_scene  set project_id = 1;
update at_performance_test_config  set project_id = 1;
update at_task  set project_id = 1;
update at_test_report  set project_id = 1;
update at_test_set  set project_id = 1;