(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ea0e5"],{"8fbc":function(e,r,a){"use strict";a.r(r);var t=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("standard-drawer",{ref:"standardDrawer",attrs:{title:e.readOnly?"详情":e.form.id?"按钮编辑":"新增操作",confirmLoading:e.confirmLoading,editable:!e.readOnly},on:{close:e.close,confirm:e.confirm}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{ref:"name",attrs:{label:"按钮名称",prop:"name"}},[a("a-input",{attrs:{placeholder:"请输入按钮名称"},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),a("a-form-model-item",{attrs:{label:"归属菜单",prop:"parentId"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.treeData,replaceFields:{title:"name",key:"id",value:"id"},placeholder:"请选择归属菜单","tree-default-expand-all":""},model:{value:e.form.parentId,callback:function(r){e.$set(e.form,"parentId",r)},expression:"form.parentId"}})],1),a("a-form-model-item",{attrs:{label:"相关权限",prop:"permission"}},[a("a-input",{attrs:{placeholder:"请输入权限标识"},model:{value:e.form.permission,callback:function(r){e.$set(e.form,"permission",r)},expression:"form.permission"}})],1)],1)],1)},o=[],n=a("b775"),s=a("2af9"),i={name:"ResourceButtonModal",components:{StandardDrawer:s["h"]},data:function(){return{confirmLoading:!1,treeData:[],readOnly:!1,labelCol:{span:4},wrapperCol:{span:18},form:{name:"",permission:"",type:2,parentId:void 0},rules:{name:[{required:!0,message:"此项为必输项",trigger:"blur"},{max:20,message:"最多输入20个字符",trigger:"change"}],parentId:[{required:!0,message:"此项为必选项",trigger:"change"}]}}},methods:{show:function(e,r){e&&(this.form=Object.assign({},e)||{}),this.readOnly="undefined"!==typeof r&&!0===r,this.loadMenuTree(),this.$refs.standardDrawer.show()},confirm:function(){var e=this;this.confirmLoading=!0,this.$refs.ruleForm.validate((function(r){if(!r)return e.confirmLoading=!1;(e.form.id?e.$http.put:e.$http.post)("resource",e.form).then((function(r){e.$message.success("操作成功！"),e.$emit("handle-success"),e.$refs.standardDrawer.close()})).catch((function(r){e.confirmLoading=!1}))}))},close:function(){this.form={name:"",permission:"",type:2,parentId:void 0},this.confirmLoading=!1,this.$refs.ruleForm.resetFields()},loadMenuTree:function(){var e=this;Object(n["b"])({url:"resource/tree?type=1",method:"get"}).then((function(r){e.treeData=r.data||[]}))}}},l=i,d=a("2877"),m=Object(d["a"])(l,t,o,!1,null,"1aaa837f",null);r["default"]=m.exports}}]);