(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2304b2"],{ec53:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("standard-drawer",{ref:"standardDrawer",attrs:{title:e.readOnly?"详情":e.form.id?"角色编辑":"新增操作",confirmLoading:e.confirmLoading,editable:!e.readOnly},on:{close:e.close,confirm:e.confirm}},[t("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("a-form-model-item",{ref:"roleKey",attrs:{label:"唯一识别",prop:"roleKey"}},[t("a-input",{attrs:{disabled:!e.readOnly&&"undefined"!==typeof e.form.id,placeholder:"请输入唯一识别标记"},model:{value:e.form.roleKey,callback:function(r){e.$set(e.form,"roleKey",r)},expression:"form.roleKey"}})],1),t("a-form-model-item",{ref:"name",attrs:{label:"角色名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入菜单名称"},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),t("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[t("a-radio-group",{model:{value:e.form.status,callback:function(r){e.$set(e.form,"status",r)},expression:"form.status"}},e._l(e.roleStatus,(function(r){return t("a-radio-button",{key:r.value,attrs:{value:r.value}},[e._v(" "+e._s(r.label)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"角色描述",prop:"description"}},[t("a-input",{attrs:{type:"textarea",placeholder:"请输入角色描述"},model:{value:e.form.description,callback:function(r){e.$set(e.form,"description",r)},expression:"form.description"}})],1),t("a-form-model-item",{attrs:{label:"权限分配",prop:"resourceIds"}},[t("a-tree",{staticStyle:{width:"100%"},attrs:{checkable:"","auto-expand-parent":!0,"default-expand-all":!0,multiple:!0,"check-strictly":!0,"default-expanded-keys":e.defaultExpandedKeys,"tree-data":e.treeData,replaceFields:{title:"name",key:"id",value:"id"}},model:{value:e.form.resourceIds,callback:function(r){e.$set(e.form,"resourceIds",r)},expression:"form.resourceIds"}})],1)],1)],1)},o=[],s=t("b775"),n=t("2af9"),l={name:"RoleEditPanel",components:{StandardDrawer:n["h"],IconSelector:n["d"]},data:function(){return{roleStatus:this.$dic.query("sys_role_state"),confirmLoading:!1,defaultExpandedKeys:[],treeData:[],readOnly:!1,labelCol:{span:4},wrapperCol:{span:18},form:{name:"",resourceIds:[],description:"",status:void 0,roleKey:void 0},rules:{name:[{required:!0,message:"此项为必输项",trigger:"blur"},{max:20,message:"最多输入20个字符",trigger:"change"}],roleKey:[{required:!0,message:"此项为必输项",trigger:"blur"},{max:50,message:"最多输入50个字符",trigger:"change"}],status:[{required:!0,message:"此项为必选项",trigger:"change"}],resourceIds:[{required:!0,message:"此项为必选项",trigger:"select"}]}}},methods:{show:function(e,r){e&&(this.form=Object.assign({},e)||{}),this.readOnly="undefined"!==typeof r&&!0===r,this.defaultExpandedKeys=this.form.resourceIds,this.loadMenuTree(),this.$refs.standardDrawer.show()},confirm:function(){var e=this;this.confirmLoading=!0,this.$refs.ruleForm.validate((function(r){var t=Object.assign({},e.form);if(t.resourceIds instanceof Array||!t.resourceIds.checked||(t.resourceIds=t.resourceIds.checked),!r)return e.confirmLoading=!1;(e.form.id?e.$http.put:e.$http.post)("role",t).then((function(r){e.$message.success("操作成功！"),e.$emit("handle-success"),e.$refs.standardDrawer.close()})).catch((function(r){e.confirmLoading=!1}))}))},close:function(){this.form={name:"",resourceIds:[],description:"",status:void 0,roleKey:void 0},this.confirmLoading=!1,this.$refs.ruleForm.resetFields()},loadMenuTree:function(){var e=this;Object(s["b"])({url:"resource/tree?status=1",method:"get"}).then((function(r){e.treeData=r.data||[]}))},handleIconChange:function(e){this.form.icon=e}}},i=l,d=t("2877"),c=Object(d["a"])(i,a,o,!1,null,"36b1e536",null);r["default"]=c.exports}}]);