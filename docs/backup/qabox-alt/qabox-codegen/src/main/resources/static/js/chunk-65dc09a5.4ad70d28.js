(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65dc09a5","chunk-2d0ea0e5","chunk-2d2245ee"],{"8fbc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("standard-drawer",{ref:"standardDrawer",attrs:{title:e.readOnly?"详情":e.form.id?"按钮编辑":"新增操作",confirmLoading:e.confirmLoading,editable:!e.readOnly},on:{close:e.close,confirm:e.confirm}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{ref:"name",attrs:{label:"按钮名称",prop:"name"}},[a("a-input",{attrs:{placeholder:"请输入按钮名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("a-form-model-item",{attrs:{label:"归属菜单",prop:"parentId"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.treeData,replaceFields:{title:"name",key:"id",value:"id"},placeholder:"请选择归属菜单","tree-default-expand-all":""},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1),a("a-form-model-item",{attrs:{label:"相关权限",prop:"permission"}},[a("a-input",{attrs:{placeholder:"请输入权限标识"},model:{value:e.form.permission,callback:function(t){e.$set(e.form,"permission",t)},expression:"form.permission"}})],1)],1)],1)},s=[],o=a("b775"),n=a("2af9"),i={name:"ResourceButtonModal",components:{StandardDrawer:n["h"]},data:function(){return{confirmLoading:!1,treeData:[],readOnly:!1,labelCol:{span:4},wrapperCol:{span:18},form:{name:"",permission:"",type:2,parentId:void 0},rules:{name:[{required:!0,message:"此项为必输项",trigger:"blur"},{max:20,message:"最多输入20个字符",trigger:"change"}],parentId:[{required:!0,message:"此项为必选项",trigger:"change"}]}}},methods:{show:function(e,t){e&&(this.form=Object.assign({},e)||{}),this.readOnly="undefined"!==typeof t&&!0===t,this.loadMenuTree(),this.$refs.standardDrawer.show()},confirm:function(){var e=this;this.confirmLoading=!0,this.$refs.ruleForm.validate((function(t){if(!t)return e.confirmLoading=!1;(e.form.id?e.$http.put:e.$http.post)("resource",e.form).then((function(t){e.$message.success("操作成功！"),e.$emit("handle-success"),e.$refs.standardDrawer.close()})).catch((function(t){e.confirmLoading=!1}))}))},close:function(){this.form={name:"",permission:"",type:2,parentId:void 0},this.confirmLoading=!1,this.$refs.ruleForm.resetFields()},loadMenuTree:function(){var e=this;Object(o["b"])({url:"resource/tree?type=1",method:"get"}).then((function(t){e.treeData=t.data||[]}))}}},c=i,l=a("2877"),d=Object(l["a"])(c,r,s,!1,null,"1aaa837f",null);t["default"]=d.exports},b41e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-view",{attrs:{avatar:"",title:!1,"header-disabled":!0}},[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"资源名称"}},[a("a-input",{attrs:{placeholder:"请输入",disabled:"tree"===e.mode},model:{value:e.queryParam.searchWord,callback:function(t){e.$set(e.queryParam,"searchWord",t)},expression:"queryParam.searchWord"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"状态"}},[a("a-select",{attrs:{placeholder:"请选择",disabled:"tree"===e.mode},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},[a("a-select-option",{attrs:{value:"-1"}},[e._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[e._v("正常")]),a("a-select-option",{attrs:{value:"0"}},[e._v("禁用")])],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.reset}},[e._v("重置")])],1)])],1)],1)],1),a("div",{staticClass:"table-page-operator-wrapper"},[a("a-popconfirm",{attrs:{title:"请选择创建类型",okText:"按钮",cancelText:"菜单"},on:{cancel:function(){return e.createMenu()},confirm:function(){return e.createButton()}}},[a("a-icon",{staticStyle:{color:"orangered"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),a("a-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"sys:resource:save",expression:"'sys:resource:save'"}],attrs:{type:"primary",ghost:""}},[e._v("新增")])],1),a("a-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"sys:resource:delete",expression:"'sys:resource:delete'"}],attrs:{disabled:0===e.selectedRowKeys.length},on:{click:function(t){return e.batchDelete(e.selectedRowKeys)}}},[e._v("删除")]),a("a-dropdown",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"sys:resource:export",expression:"'sys:resource:export'"}]},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"export-data",on:{click:e.exprotExccel}},[e._v("导出Excel")])],1),a("a-button",[e._v(" 更多操作 "),a("a-icon",{attrs:{type:"down"}})],1)],1),a("a-switch",{staticStyle:{width:"80px",float:"right","border-radius":"4px"},attrs:{"checked-children":"树模式","un-checked-children":"列模式","default-checked":""},on:{change:e.onModeChange}})],1),a("a-table",{attrs:{rowKey:"id",columns:e.columns,"data-source":e.data,"row-selection":e.rowSelection,pagination:!1,loading:e.loading},scopedSlots:e._u([{key:"name",fn:function(t,r){return[r.icon?a("a-icon",{staticStyle:{"margin-right":"6px"},attrs:{type:r.icon}}):e._e(),e._v(" "+e._s(t)+" ")]}},{key:"type",fn:function(t){return[1===t?a("a-tag",{attrs:{color:"orange"}},[e._v(e._s(e._f("getLabel")(t,"sys_res_type")))]):2===t?a("a-tag",{attrs:{color:"green"}},[e._v(e._s(e._f("getLabel")(t,"sys_res_type")))]):a("a-tag",[e._v(e._s(e._f("getLabel")(t,"sys_res_type")))])]}},{key:"status",fn:function(t){return["1"===t?a("a-tag",{attrs:{color:"green"}},[e._v(e._s(e._f("getLabel")(t,"sys_res_state")))]):a("a-tag",[e._v(e._s(e._f("getLabel")(t,"sys_res_state")))])]}},{key:"action",fn:function(t,r){return[a("a",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"sys:resource:update",expression:"'sys:resource:update'"}],on:{click:function(t){return e.editRow(r)}}},[e._v("编辑")]),a("a-divider",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"sys:resource:update",expression:"'sys:resource:update'"}],attrs:{type:"vertical"}}),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[e._v(" 更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{on:{click:function(t){return e.view(r)}}},[e._v("详情")])]),"1"===r.status?a("a-menu-item",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"sys:resource:disabled",expression:"'sys:resource:disabled'"}]},[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.updateStatus(r)}}},[e._v("禁用")])]):e._e(),"0"===r.status?a("a-menu-item",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"sys:resource:useable",expression:"'sys:resource:useable'"}]},[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.updateStatus(r)}}},[e._v("启用")])]):e._e(),a("a-menu-item",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"sys:resource:delete",expression:"'sys:resource:delete'"}]},[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.deleteRecord(r)}}},[e._v("删除")])])],1)],1)]}}])}),a("resource-menu-modal",{ref:"menuModal",on:{"handle-success":e.formHandleSuccess}}),a("resource-button-modal",{ref:"buttonModal",on:{"handle-success":e.formHandleSuccess}})],1)],1)},s=[],o=(a("a15b"),a("b0c0"),a("680a")),n=a("e09f"),i=a("8fbc"),c=a("4360"),l={name:"ResourceList",components:{PageView:o["c"],ResourceMenuModal:n["default"],ResourceButtonModal:i["default"]},data:function(){var e=this;return{mode:"tree",queryParam:{status:"-1"},loading:!1,columns:[{title:"资源名称",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"}},{title:"类型",dataIndex:"type",key:"type",width:90,scopedSlots:{customRender:"type"}},{title:"权限标识",dataIndex:"permission",width:"30%",key:"permission"},{title:"状态",dataIndex:"status",width:100,scopedSlots:{customRender:"status"}},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],data:[],selectedRowKeys:[],selectedRows:[],rowSelection:{onChange:function(t,a){e.selectedRowKeys=t,e.selectedRows=a},onSelect:function(e,t,a){},onSelectAll:function(e,t,a){}}}},mounted:function(){this.loadData()},methods:{search:function(){this.loadData()},reset:function(){this.queryParam={status:"-1"},this.loadData()},deleteRecord:function(e){var t=this;this.$confirm({title:"警告",content:"真的要删除 ".concat(e.name," 吗?"),okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){t.handleDelete([e.id],{success:function(){},done:function(){}})}})},batchDelete:function(e){var t=this;this.$confirm({title:"警告",content:"真的要删除这 ".concat(e.length," 个资源吗?"),okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){t.handleDelete(e,{success:function(){},done:function(){}})}})},handleDelete:function(e,t){var a=this;e.length>0&&this.$http.delete("resource/"+e.join(",")).then((function(e){a.$message.success("已成功删除"),a.loadData(),t&&("function"===typeof t.done&&t.done.call(a),"function"===typeof t.success&&t.success.call(a,e))})).catch((function(e){t&&("function"===typeof t.done&&t.done.call(a),"function"===typeof t.fail&&t.fail.call(a,e))}))},exprotExccel:function(){},loadData:function(){var e=this;this.loading=!0,this.refreshStore();var t=Object.assign({},this.queryParam);"-1"===t.status&&delete t.status,this.$http.get("tree"===this.mode?"/resource/tree":"resource/list",{params:t}).then((function(t){e.loading=!1,e.data=t.data})).catch((function(t){e.loading=!1}))},createMenu:function(){this.$refs.menuModal.show()},createButton:function(){this.$refs.buttonModal.show()},view:function(e){1===e.type?this.$refs.menuModal.show(e,!0):this.$refs.buttonModal.show(e,!0)},editRow:function(e){1===e.type?this.$refs.menuModal.show(e):this.$refs.buttonModal.show(e)},updateStatus:function(e){var t=this,a="1"===e.status?"0":"1";this.$http.put("/resource/updateStatus",{id:e.id,status:a}).then((function(e){e.data?(t.$message.success("操作成功"),t.loadData()):t.$message.error(e.data||"操作失败")}))},formHandleSuccess:function(){this.loadData()},refreshStore:function(){c["a"].dispatch("AllResource").then((function(){}))},onModeChange:function(){this.mode="tree"===this.mode?"list":"tree",this.reset()}}},d=l,u=a("2877"),m=Object(u["a"])(d,r,s,!1,null,"5891b401",null);t["default"]=m.exports},e09f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("standard-drawer",{ref:"standardDrawer",attrs:{title:e.readOnly?"详情":e.form.id?"菜单编辑":"新增操作",confirmLoading:e.confirmLoading,editable:!e.readOnly},on:{close:e.close,confirm:e.confirm}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{ref:"name",attrs:{label:"菜单名称",prop:"name"}},[a("a-input",{attrs:{placeholder:"请输入菜单名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("a-form-model-item",{attrs:{label:"归属菜单",prop:"parentId"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.treeData,replaceFields:{title:"name",key:"id",value:"id"},placeholder:"请选择归属菜单","tree-default-expand-all":""},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1),a("a-form-model-item",{attrs:{label:"菜单URL",prop:"url"}},[a("a-input",{attrs:{placeholder:"请输入URL地址"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),a("a-form-model-item",{attrs:{label:"组件地址",required:"",prop:"path"}},[a("a-input",{attrs:{placeholder:"请输入所属组件路径"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1),a("a-form-model-item",{attrs:{label:"是否隐藏",prop:"hide"}},[a("a-switch",{model:{value:e.form.hide,callback:function(t){e.$set(e.form,"hide",t)},expression:"form.hide"}})],1),a("a-form-model-item",{attrs:{label:"相关权限",prop:"permission"}},[a("a-input",{attrs:{placeholder:"请输入权限标识"},model:{value:e.form.permission,callback:function(t){e.$set(e.form,"permission",t)},expression:"form.permission"}})],1),a("a-form-model-item",{attrs:{label:"菜单图标",prop:"icon"}},[a("a-input",{model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}},[a("a-popover",{attrs:{slot:"addonAfter",title:"图标选择",placement:"left"},slot:"addonAfter"},[a("template",{slot:"content"},[a("icon-selector",{staticStyle:{"max-width":"1000px"},on:{change:e.handleIconChange}})],1),a("a-icon",{attrs:{type:"setting"}})],2)],1)],1),a("a-form-model-item",{attrs:{label:"排序序号",prop:"sort"}},[a("a-input-number",{staticStyle:{"min-width":"150px"},attrs:{placeholder:"请输入排序序号"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1)],1)},s=[],o=a("b775"),n=a("2af9"),i={name:"ResourceMenuModal",components:{StandardDrawer:n["h"],IconSelector:n["d"]},data:function(){return{confirmLoading:!1,treeData:[],readOnly:!1,labelCol:{span:4},wrapperCol:{span:18},form:{type:1,name:"",component:void 0,url:"",hide:!1,permission:"",icon:void 0,sort:void 0},rules:{name:[{required:!0,message:"此项为必输项",trigger:"blur"},{max:20,message:"最多输入20个字符",trigger:"change"}],component:[{required:!0,message:"Please select Activity zone",trigger:"change"},{max:200,message:"最多输入200个字符",trigger:"blur"}],url:[{required:!0,message:"Please pick a date",trigger:"change"},{max:200,message:"最多输入200个字符",trigger:"blur"}],resource:[{required:!0,message:"Please select activity resource",trigger:"change"}],desc:[{required:!0,message:"Please input activity form",trigger:"blur"}]}}},methods:{show:function(e,t){e&&(this.form=Object.assign({},e)||{}),this.readOnly="undefined"!==typeof t&&!0===t,this.loadMenuTree(),this.$refs.standardDrawer.show()},confirm:function(){var e=this;this.confirmLoading=!0,this.$refs.ruleForm.validate((function(t){if(!t)return e.confirmLoading=!1;(e.form.id?e.$http.put:e.$http.post)("resource",e.form).then((function(t){e.$message.success("操作成功！"),e.$emit("handle-success"),e.$refs.standardDrawer.close()})).catch((function(t){e.confirmLoading=!1}))}))},close:function(){this.form={type:1,name:"",component:void 0,url:"",hide:!1,permission:"",icon:void 0,sort:void 0},this.confirmLoading=!1,this.$refs.ruleForm.resetFields()},loadMenuTree:function(){var e=this;Object(o["b"])({url:"resource/tree?type=1",method:"get"}).then((function(t){e.treeData=t.data||[]}))},handleIconChange:function(e){this.form.icon=e}}},c=i,l=a("2877"),d=Object(l["a"])(c,r,s,!1,null,"54290af2",null);t["default"]=d.exports}}]);